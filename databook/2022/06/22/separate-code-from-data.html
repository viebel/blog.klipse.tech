<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    
        <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Separate code from data | Yehonathan Sharvit</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Separate code from data" />
<meta name="author" content="Yehonathan Sharvit" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Benefits and costs of separating code from data in Data-Oriented Programming. Drawbacks of encapsulation in Object-Oriented Programming." />
<meta property="og:description" content="Benefits and costs of separating code from data in Data-Oriented Programming. Drawbacks of encapsulation in Object-Oriented Programming." />
<meta property="og:site_name" content="Yehonathan Sharvit" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-06-22T04:32:24+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Separate code from data" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@Yehonathan Sharvit" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Yehonathan Sharvit"},"dateModified":"2022-06-22T04:32:24+02:00","datePublished":"2022-06-22T04:32:24+02:00","description":"Benefits and costs of separating code from data in Data-Oriented Programming. Drawbacks of encapsulation in Object-Oriented Programming.","headline":"Separate code from data","mainEntityOfPage":{"@type":"WebPage","@id":"/databook/2022/06/22/separate-code-from-data.html"},"url":"/databook/2022/06/22/separate-code-from-data.html"}</script>
<!-- End Jekyll SEO tag -->

    

    <!-- Site Favicon -->
    <link rel="shortcut icon" href="/assets/favicon2.png" type="image/png" />

    <!-- Font Embed Code -->
	<link href="https://fonts.googleapis.com/css?family=Crimson+Text:400,400i,600,600i|Karla:400,400i,700,700i" rel="stylesheet">

    <!-- CSS Styles -->
    <link href="/assets/css/style.css" rel="stylesheet">
</head>



<body class="layout-post">
    <div id="page" class="site">
        <header id="masthead" class="site-header">
    <div class="site-header-wrap">
        <div class="site-header-inside">

            <div class="site-branding">
                
                <p class="profile">
                    <a href="/">
                        <img src="/assets/images/authorimage.jpg" alt="'s Picture"
                            class="avatar" />
                    </a>
                </p>
                <div class="site-identity">
                    
                    <h1 class="site-title">
                        <a href="/">Yehonathan Sharvit</a>
                    </h1>
                    
                    
                    <p class="site-description">Developer. Author. Speaker.</p>
                    
                </div><!-- .site-identity -->
                
                <button id="menu-toggle" class="menu-toggle"><span class="screen-reader-text">Main Menu</span><span
                        class="icon-menu" aria-hidden="true"></span></button>
            </div><!-- .site-branding -->

            <nav id="main-navigation" class="site-navigation" aria-label="Main Navigation">
                <div class="site-nav-wrap">
                    <div class="site-nav-inside">
                    <ul class="menu">
                        
                        
                        
                        <li class="menu-item "><a href="/">Blog</a></li>
                        
                        
                        
                        <li class="menu-item "><a href="/talks">Talks</a></li>
                        
                        
                        
                        <li class="menu-item "><a href="/about">About</a></li>
                        
                        
                        
                        <li class="menu-item "><a href="/contact">Contact</a></li>
                        
                        
                        
                        <li class="menu-item "><a href="/search">Search</a></li>
                        
                        
                        
                        <li class="menu-item "><a href="/testimonials">Testimonials</a></li>
                        
                    </ul>
                    <p class="social-links">
    <a class="github-button" href="https://github.com/viebel/klipse" data-color-scheme="no-preference: dark; light: dark; dark: dark;" data-show-count="true" aria-label="Star viebel/klipse on GitHub"></a>
<script async defer src="https://buttons.github.io/buttons.js"></script>

    
    <a href="https://twitter.com/viebel" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
<!--
Font Awesome Free 5.5.0 by @fontawesome - https://fontawesome.com
License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
-->
    </a>
    
    
    
    
    
    
    
    
    
    <a href="https://www.linkedin.com/in/viebel" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
<!--
Font Awesome Free 5.5.0 by @fontawesome - https://fontawesome.com
License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
-->
    </a>
    
    
    
</p>

                    <div class="book-header">
  <div>
    Discover my book!
  </div>
  <a href="https://www.manning.com/books/data-oriented-programming?utm_source=viebel&utm_medium=affiliate&utm_campaign=book_sharvit2_data_1_29_21&a_aid=viebel&a_bid=d5b546b7" style="text-decoration: none;">
    <img src="/assets/dop-book.png">
  </a>
  <div>
    DISCOUNT CODE: sharvit39
  </div>
</div>

                    </div><!-- .site-nav-inside -->
                </div><!-- .site-nav-wrap -->
            </nav><!-- .site-navigation -->

        </div><!-- .site-header-inside -->
    </div><!-- .site-header-wrap -->
</header><!-- .site-header -->

        <div id="content" class="site-content fadeInDown delay_075s">
            <div class="inner-wide">
                <main id="main" class="site-main">

    <article class="post-full inner">

        <header class="post-header">
            <h1 class="post-title">Separate code from data</h1>
            <span class="post-meta">
              <time class="post-date" datetime="2022-06-22">
                June 22, 2022
              </time>
            </span>
            
            <span class="post-tags">
                <a href="/tags/index.html#dop"
                    rel="tag">dop</a>
                
            </span>
            
        </header><!-- .post-header -->

        <div class="post-content">
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The first principle of Data-Oriented Programming (DOP) is a design principle that recommends a clear separation between code (behavior) and data. This may appear to be a FP principle, but in fact, one can adhere to it or break it either in FP or in OOP:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adherence to this principle in OOP means aggregating the code as methods of a static class.</p>
</li>
<li>
<p>Breaking this principle in FP means hiding state in the lexical scope of a function.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Also, this principle does not relate to the way data is represented. Data representation is addressed by <a href="/databook/2022/06/22/generic-data-structures.html">Principle #2: Represent data with generic data structures</a>.</p>
</div>
<div>
  <p>
    This article is an excerpt from my <a href="https://www.manning.com/books/data-oriented-programming?utm_source=viebel&utm_medium=affiliate&utm_campaign=book_sharvit2_data_1_29_21&a_aid=viebel&a_bid=d5b546b7"> book </a> about <b>Data-Oriented Programming</b>.
  </p>

  <p>
    More excerpts are available on my <a href="/data-oriented-programming-book.html">blog</a>.
  </p>

  <br>
</div>
<div class="paragraph">
<p>This article is an exploration of the first principle of Data-Oriented Programming. The other principles of DOP are explored here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="/databook/2022/06/22/separate-code-from-data.html">Principle #1</a>: Separating code (behavior) from data.</p>
</li>
<li>
<p><a href="/databook/2022/06/22/generic-data-structures.html">Principle #2</a>: Representing data with generic data structures.</p>
</li>
<li>
<p><a href="/databook/2022/06/22/immutable-data.html">Principle #3</a>: Treating data as immutable.</p>
</li>
<li>
<p><a href="/databook/2022/06/22/data-validation.html">Principle #4</a>: Separating data schema from data representation.</p>
</li>
</ul>
</div>
<div class="quoteblock">
<blockquote>
<em>Principle #1</em>&#8201;&#8212;&#8201;Separate code from data in a way that the code resides in functions whose behavior does not depend on data that is encapsulated in the function&#8217;s context.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="illustration-of-principle-1">Illustration of Principle #1</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Our exploration of Principle #1 begins by illustrating how it can be applied to OOP and FP. The following sections illustrate how this principle can be adhered to or broken in a simple program that deals with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An author entity with a <code>firstName</code>, a <code>lastName</code>, and the number of <code>books</code> they wrote.</p>
</li>
<li>
<p>A piece of code that calculates the full name of the author.</p>
</li>
<li>
<p>A piece of code that determines if an author is prolific, based on the number of books they wrote.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="breaking-principle-1-in-oop">Breaking Principle #1 in OOP</h3>
<div class="paragraph">
<p>Breaking Principle #1 in OOP happens when we write code that combines data and code together in an object. The following listing demonstrates what this looks like.</p>
</div>
<div id="break-1-oop-klipse-js" class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="klipse-javascript"><span></span>class Author {
  constructor(firstName, lastName, books) {
    this.firstName = firstName;
    this.lastName = lastName;
    this.books = books;
  }
  fullName() {
    return this.firstName + &quot; &quot; + this.lastName;
  }
  isProlific() {
    return this.books &gt; 100;
  }
}

var obj = new Author(&quot;Isaac&quot;, &quot;Asimov&quot;, 500); // <b class="conum">(1)</b>
obj.fullName();
// → &quot;Isaac Asimov&quot;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Isaac Asimov really wrote around 500 books!</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="breaking-principle-1-in-fp">Breaking Principle #1 in FP</h3>
<div class="paragraph">
<p>Breaking this principle without classes in FP means hiding data in the lexical scope of a function. The next listing provides an example of this.</p>
</div>
<div id="break-1-fp-klipse-js" class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="klipse-javascript"><span></span>function createAuthorObject(firstName, lastName, books) {
  return {
    fullName: function() {
      return firstName + &quot; &quot; + lastName;
    },
    isProlific: function () {
      return books &gt; 100;
    }
  };
}

var obj = createAuthorObject(&quot;Isaac&quot;, &quot;Asimov&quot;, 500); 
obj.fullName();
// → &quot;Isaac Asimov&quot;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="adhering-to-principle-1-in-oop">Adhering to Principle #1 in OOP</h3>
<div class="paragraph">
<p>The following listing shows an example that adheres to Principle #1 in OOP. Compliance with this principle may be achieved even with classes by writing programs such that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The code consists of static methods.</p>
</li>
<li>
<p>The data is encapsulated in data classes (classes that are merely containers of data).</p>
</li>
</ul>
</div>
<div id="compliant-1-oop-klipse-js" class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="klipse-javascript"><span></span>class AuthorData {
  constructor(firstName, lastName, books) {
    this.firstName = firstName;
    this.lastName = lastName;
    this.books = books;
  }
}

class NameCalculation {
  static fullName(data) {
    return data.firstName + &quot; &quot; + data.lastName;
  }
}

class AuthorRating {
  static isProlific (data) {
    return data.books &gt; 100;
  }
}

var data = new AuthorData(&quot;Isaac&quot;, &quot;Asimov&quot;, 500); 
NameCalculation.fullName(data);
// → &quot;Isaac Asimov&quot;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="adhering-to-principle-1-in-fp">Adhering to Principle #1 in FP</h3>
<div class="paragraph">
<p>Here is an example that adheres to Principle #1 in FP. Compliance with this principle means separating code from data.</p>
</div>
<div id="compliant-1-fp-klipse-js" class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="klipse-javascript"><span></span>function createAuthorData(firstName, lastName, books) {
  return {
    firstName: firstName,
    lastName: lastName,
    books: books
  };
}

function fullName(data) {
  return data.firstName + &quot; &quot; + data.lastName;
}

function isProlific (data) {
  return data.books &gt; 100;
}

var data = createAuthorData(&quot;Isaac&quot;, &quot;Asimov&quot;, 500); 
fullName(data);
// → &quot;Isaac Asimov&quot;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="benefits-of-principle-1">Benefits of Principle #1</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Having illustrated how to follow or break Principle #1 both in OOP and FP, let&#8217;s look at the benefits that Principle #1 brings to our programs. Careful separation of code from data benefits our programs in the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Code can be reused in different contexts.</p>
</li>
<li>
<p>Code can be tested in isolation.</p>
</li>
<li>
<p>Systems tend to be less complex.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="benefit-1-code-can-be-reused-in-different-contexts">Benefit #1: Code can be reused in different contexts</h3>
<div class="paragraph">
<p>Imagine that besides the author entity, there is a user entity that has nothing to do with authors but has two of the same data fields as the author entity: <code>firstName</code> and <code>lastName</code>. The logic of calculating the full name is the same for authors and users&#8201;&#8212;&#8201;retrieving the values of two fields with the same names. However, in traditional OOP as in the version with <code>createAuthorObject</code> in listing below, the code of <code>fullName</code> cannot be reused on a user in a <em>straightforward</em> way because it is locked inside the <code>Author</code> class.</p>
</div>
<div id="full-name-oo-klipse-js" class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="klipse-javascript"><span></span>class Author {
  constructor(firstName, lastName, books) {
    this.firstName = firstName;
    this.lastName = lastName;
    this.books = books;
  }
  fullName() {
    return this.firstName + &quot; &quot; + this.lastName;
  }
  isProlific() {
    return this.books &gt; 100;
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>One way to achieve code re-usability when code and data are mixed is to use OOP mechanisms like inheritance or composition to let the <code>User</code> and <code>Author</code> classes use the same <code>fullName</code> method. These techniques are adequate for simple use cases, but in real-world systems, the abundance of classes (either base classes or composite classes) tends to increase complexity.</p>
</div>
<div class="paragraph">
<p>Here is a simple way to avoid inheritance. In this listing, we duplicate the code of <code>fullName</code> inside a <code>createUserObject</code> function.</p>
</div>
<div id="oo-duplicate-klipse-js" class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="klipse-javascript"><span></span>function createAuthorObject(firstName, lastName, books) {
  var data = {firstName: firstName, lastName: lastName, books: books};

  return {
    fullName: function fullName() {
      return data.firstName + &quot; &quot; + data.lastName;
    }
  };
}

function createUserObject(firstName, lastName, email) {
  var data = {firstName: firstName, lastName: lastName, email: email};

  return {
    fullName: function fullName() {
      return data.firstName + &quot; &quot; + data.lastName;
    }
  };
}

var obj = createUserObject(&quot;John&quot;, &quot;Doe&quot;, &quot;john@doe.com&quot;);
obj.fullName();
// → &quot;John Doe&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In DOP, no modification to the code that deals with author entities is necessary in order to make it available to user entities, because:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The code that deals with full name calculation is separate from the code that deals with the creation of author data.</p>
</li>
<li>
<p>The function that calculates the full name works with any hash map that has a <code>firstName</code> and a <code>lastName</code> field.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is possible to leverage the fact that data relevant to the full name calculation for a user and an author has the same shape. With no modifications, the <code>fullName</code> function works properly both on author data and on user data as the following listing shows.</p>
</div>
<div id="same-code-klipse-js" class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="klipse-javascript"><span></span>function createAuthorData(firstName, lastName, books) {
  return {firstName: firstName, lastName: lastName, books: books};
}

function fullName(data) {
  return data.firstName + &quot; &quot; + data.lastName;
}

function createUserData(firstName, lastName, email) {
  return {firstName: firstName, lastName: lastName, email: email};
}

var authorData = createAuthorData(&quot;Isaac&quot;, &quot;Asimov&quot;, 500);
fullName(authorData);

var userData = createUserData(&quot;John&quot;, &quot;Doe&quot;, &quot;john@doe.com&quot;);
fullName(userData);
// → &quot;John Doe&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>When Principle #1 is applied in OOP, code reuse is straightforward even when classes are used. In statically typed OOP languages like Java or C# we would have to create a common interface for <code>AuthorData</code> and <code>UserData</code>. In a dynamically typed language like JavaScript, however, that is not required. The code of <code>NameCalculation.fullName()</code> works both with author data and user data as the next listing demonstrates.</p>
</div>
<div id="same-code-oop-klipse-js" class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="klipse-javascript"><span></span>class AuthorData {
  constructor(firstName, lastName, books) {
    this.firstName = firstName;
    this.lastName = lastName;
    this.books = books;
  }
}

class NameCalculation {
  static fullName(data) {
    return data.firstName + &quot; &quot; + data.lastName;
  }
}

class UserData {
  constructor(firstName, lastName, email) {
    this.firstName = firstName;
    this.lastName = lastName;
    this.email = email;
  }
}

var userData = new UserData(&quot;John&quot;, &quot;Doe&quot;, &quot;john@doe.com&quot;);
NameCalculation.fullName(userData);

var authorData = new AuthorData(&quot;Isaac&quot;, &quot;Asimov&quot;, 500);
NameCalculation.fullName(authorData);
// → &quot;John Doe&quot;</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
When code is separate from data, it is straightforward to reuse code in different contexts. This benefit is achievable both in FP and in OOP.
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="benefit-2-code-can-be-tested-in-isolation">Benefit #2: Code can be tested in isolation</h3>
<div class="paragraph">
<p>A similar benefit is the ability to test code in an isolated context. When code is not separate from data, it is necessary to instantiate an object to test its methods. For instance, in order to test the <code>fullName</code> code that lives inside the <code>createAuthorObject</code> function, we need to instantiate an author object as this listing shows.</p>
</div>
<div id="test-instantiate-klipse-js" class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="klipse-javascript"><span></span>var author =  createAuthorObject(&quot;Isaac&quot;, &quot;Asimov&quot;, 500);
author.fullName() === &quot;Isaac Asimov&quot;
// → true</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this simple scenario, it is not overly burdensome. We only load (unnecessarily) the code for <code>isProlific</code>.
Although in a real-world situation, instantiating an object might involve complex and tedious setup.</p>
</div>
<div class="paragraph">
<p>In the DOP version, where <code>createAuthorData</code> and <code>fullName</code> are separate, we can create the data to be passed to <code>fullName</code> in isolation, testing <code>fullName</code> in isolation as well. The following listing provides an example.</p>
</div>
<div id="test-isolate-klipse-js" class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="klipse-javascript"><span></span>var author =  {
  firstName: &quot;Isaac&quot;, 
  lastName: &quot;Asimov&quot;
};
fullName(author) === &quot;Isaac Asimov&quot;
// → true</code></pre>
</div>
</div>
<div class="paragraph">
<p>If classes are used, it is only necessary to instantiate a data object. We do not need to load the code for <code>isProlific</code>, which lives in a separate class than <code>fullName</code>, in order to test <code>fullName</code>. The next listing lays out an example of this approach.</p>
</div>
<div id="test-isolate-oop-klipse-js" class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="klipse-javascript"><span></span>var data =  new AuthorData(&quot;Isaac&quot;, &quot;Asimov&quot;);

NameCalculation.fullName(data) === &quot;Isaac Asimov&quot;
// → true</code></pre>
</div>
</div>
<div class="quoteblock">
<blockquote>
Writing tests is easier when code is separated from data.
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="benefit-3-systems-tend-to-be-less-complex">Benefit #3: Systems tend to be less complex</h3>
<div class="paragraph">
<p>The third benefit of applying Principle #1 to our programs is that systems tend to be less complex. This benefit is the deepest one but also the one that is most subtle to explain.</p>
</div>
<div class="paragraph">
<p>The type of complexity I refer to is the one that makes systems hard to understand as defined in the paper, &#8220;Out of the Tar Pit&#8221; by Ben Moseley and Peter Marks (<a href="http://mng.bz/enzq" class="bare">http://mng.bz/enzq</a>). It has nothing to do with the complexity of the resources consumed by a program. Similarly, references to <em>simplicity</em> mean <em>not complex</em> (in other words, easy to understand).</p>
</div>
<div class="quoteblock">
<blockquote>
Complex in the context of this article means <em>hard to understand</em>.
</blockquote>
</div>
<div class="paragraph">
<p>Keep in mind that complexity and simplicity (like hard and easy) are not absolute but relative concepts. The complexity of two systems can be compared to determine whether system A is more complex (or simpler) than system B. When code and data are kept separate, the system tends to be easier to understand for two reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>The scope of a data entity or a code entity is smaller than the scope of an entity that combines code and data.</em> Each entity is therefore easier to understand.</p>
</li>
<li>
<p><em>Entities of the system are split into disjoint groups: code and data.</em> Entities therefore have fewer relations to other entities.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This insight is illustrated in a class diagram of our fictitious Library Management System, where code and data are mixed. It is not necessary to know the details of the classes of this system to see that the following diagram represents a complex system; this in the sense that it is hard-to-understand. The system is hard-to-understand because there are many dependencies between the entities that compose the system.</p>
</div>
<div id="lib-mgmt-class-diagram-overview-2" class="imageblock">
<div class="content">
<img src="/uml/chapter00/complex-class-relation.png" alt="complex class relation">
</div>
</div>
<div class="paragraph">
<p>The most complex entity of the system is the <code>Librarian</code> entity, which is connected via six relations to other entities. Some relations are data relations (association and composition), and some relations are code relations (inheritance and dependency). But in this design, the <code>Librarian</code> entity mixes code and data, and therefore, it has to be involved in both data and code relations. If each entity of the system is split into a code entity and a data entity <em>without making any further modification to the system</em>, the result is made of two disconnected parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The left part is made only of data entities and data relations: association and composition.</p>
</li>
<li>
<p>The right part is made only of code entities and code relations: dependency and inheritance.</p>
</li>
</ul>
</div>
<div id="lib-mgmt-simplified-class-diagram-2" class="imageblock">
<div class="content">
<img src="/uml/chapter00/data-code-relation.png" alt="data code relation">
</div>
</div>
<div class="paragraph">
<p>The new system, where code and data are separate, is easier to understand than the original system, where code and data are mixed. Thus, the data part of the system and the code part of the system can each be understood on its own.</p>
</div>
<div class="quoteblock">
<blockquote>
A system made of disconnected parts is less complex than a system made of a single part.
</blockquote>
</div>
<div class="paragraph">
<p>One could argue that the complexity of the original system, where code and data are mixed, is due to a bad design and that an experienced OOP developer would have designed a simpler system using smart design patterns. That is true, but in a sense, it is irrelevant. The point of Principle #1 is that a system made of entities that do not combine code and data tends to be simpler than a system made of entities that do combine code and data.</p>
</div>
<div class="paragraph">
<p>It has been said many times that <em>simplicity is hard</em>. According to the first principle of DOP, simplicity is easier to achieve when separating code and data.</p>
</div>
<div class="quoteblock">
<blockquote>
Simplicity is easier to achieve when code is separated from data.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cost-for-principle-1">Cost for Principle #1</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section looks at the cost involved when we implement Principle #1. The price we pay in order to benefit from the separation between code and data is threefold:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>There is no control on what code can access what data.</p>
</li>
<li>
<p>There is no packaging.</p>
</li>
<li>
<p>Our systems are made from more entities.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="cost-1-there-is-no-control-on-what-code-can-access-what-data">Cost #1: There is no control on what code can access what data</h3>
<div class="paragraph">
<p>When code and data are mixed, it is easy to understand what pieces of code can access what kinds of data. For example, in OOP, the data is encapsulated in an object, which guarantees that the data is accessible only by the object&#8217;s methods. In DOP, data stands on its own. It is transparent if you like, and as a consequence, it can be accessed by any piece of code.</p>
</div>
<div class="paragraph">
<p>When refactoring the shape of some data, <em>every</em> place in our code that accesses this kind of data must be known. Moreover, without the application of <a href="/databook/2022/06/22/immutable-data.html">Principle #3: Immutable data</a>, accessing data by any piece of code is inherently unsafe. In that case, it would be hard to guarantee the validity of our data.</p>
</div>
</div>
<div class="sect2">
<h3 id="cost-2-there-is-no-packaging">Cost #2: There is no packaging</h3>
<div class="paragraph">
<p>One of the benefits of mixing code and data is that when you have an object in hand, it is a package that contains both the code (via methods) and the data (via members). As a consequence, it is easy to discover how to manipulate the data: you look at the methods of the class.</p>
</div>
<div class="paragraph">
<p>In DOP, the code that manipulates the data could be anywhere. For example, <code>createAuthorData</code> might be in one file and <code>fullName</code> in another file. This makes it difficult for developers to discover that the <code>fullName</code> function is available. In some situations, it could lead to wasted time and unnecessary code duplication.</p>
</div>
</div>
<div class="sect2">
<h3 id="cost-3-our-systems-are-made-from-more-entities">Cost #3: Our systems are made from more entities</h3>
<div class="paragraph">
<p>Let&#8217;s do simple arithmetic. Imagine a system made of <em>N</em> classes that combine code and data. When you split the system into code entities and data entities, you get a system made of 2<em>N</em> entities. This calculation is not accurate, however, because usually, when you separate code and data, the class hierarchy tends to get simpler as we need less class inheritance and composition. Therefore, the number of classes in the resulting system will probably be somewhere between <em>N</em> and 2<em>N</em>.</p>
</div>
<div class="paragraph">
<p>On one hand, when adhering to Principle #1, the entities of the system are simpler. On the other hand, there are more entities. This cost is mitigated by <a href="/databook/2022/06/22/generic-data-structures.html">Principle #2</a>, which guides us to represent our data with generic data structures.</p>
</div>
<div class="quoteblock">
<blockquote>
When adhering to Principle #1, systems are made of simpler entities, but there are more of them.
</blockquote>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-principle-1">Summary of Principle #1</h2>
<div class="sectionbody">
<div class="paragraph">
<p>DOP requires the separation of code from data. In OOP languages, aggregate code in static methods and data in classes with no methods. In FP languages, avoid hiding data in the lexical scope of functions.</p>
</div>
<div class="paragraph">
<p>Separating code from data comes at a price. It reduces control over what pieces of code access our data and can cause our systems to be made of more entities. But it&#8217;s worth paying the price because, when adhering to this principle, our code can be reused in different contexts in a straightforward way and tested in isolation. Moreover, a system made of separate entities for code and data tends to be easier to understand.</p>
</div>
<div class="paragraph">
<p>To follow this principle, we separate code from data in such a way that the code resides in functions whose behavior does not depend on data that is encapsulated in the function&#8217;s context.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/uml/chapter00/do-principle-1-separate.png" alt="do principle 1 separate">
</div>
</div>
<div class="paragraph">
<p>Benefits include</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Code can be reused in different contexts.</p>
</li>
<li>
<p>Code can be tested in isolation.</p>
</li>
<li>
<p>Systems tend to be less complex.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The cost for implementing Principle #1 includes</p>
</div>
<div class="ulist">
<ul>
<li>
<p>No control on what code accesses which data.</p>
</li>
<li>
<p>No packaging.</p>
</li>
<li>
<p>More entities.</p>
</li>
</ul>
</div>
</div>
</div>
        </div>
        <footer class="post-footer">
            <div class="separator"></div>
            <div class="post-share">
                <span class="post-share-title">Share:</span>
                <a target="_blank"
                    href="https://twitter.com/share?text=Separate+code+from+data&amp;url=https://blog.klipse.techdatabook/2022/06/22/separate-code-from-data.html">Twitter</a>
                <a target="_blank"
                    href="https://www.facebook.com/sharer/sharer.php?u=https://blog.klipse.techdatabook/2022/06/22/separate-code-from-data.html">Facebook</a>
            </div><!-- .share-post -->
        </footer>
    </article>

    
    <section class="newsletter-box inner">
    <h2 class="newsletter-box-title">Subscribe to Yehonathan Sharvit newsletter</h2>
    <p>Get the latest and greatest from Yehonathan Sharvit delivered straight to your inbox every week.</p>
    <!-- Begin TinyLetter Signup Form -->
    <div id="tinyletter_embed_signup">
      <form class="validate gh-subscribe-form" action="https://tinyletter.com/klipse" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/klipse', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
	      <label for="tlemail" class="screen-reader-text">Email Address</label>
        <input type="email" value="" name="email" class="required email subscribe-email" placeholder="Your email address">
	      <input type="hidden" value="1" name="embed"/>
	      <input class="button" type="submit" value="Subscribe" />
      </form>
    </div>
    <!--End mc_embed_signup-->
</section><!-- .widget -->

    
    <section class="read-next inner">
        <h2 class="read-next-title">Read Next</h2>
        
        <article class="post">
            <header class="post-header">
                <div class="post-meta">
                    <time class="published" datetime="June 22, 2022">June 22, 2022</time>
                </div>
                <h3 class="post-title"><a href="/dop/2022/06/22/principles-of-dop.html">Principles of Data-Oriented Programming</a>
                </h3>
                <p class="post-tags">
                    
                    
                    
                    <a href='/tag/dop/'>Dop</a>
                    
                    
                    
                </p>
            </header>
        </article>
        
        
    </section><!-- .read-next -->

    <!-- Create a sorted array of tags -->
     
    <section class="tagcloud inner">
        <h2 class="tagcloud-title">Tags</h2>
        <div class="tag-links">
            
            <a href='/tags/#algo'>algo</a>
            
            <a href='/tags/#brainfuck'>brainfuck</a>
            
            <a href='/tags/#c%2B%2B'>c++</a>
            
            <a href='/tags/#clojure'>clojure</a>
            
            <a href='/tags/#clojurescript'>clojurescript</a>
            
            <a href='/tags/#compiler'>compiler</a>
            
            <a href='/tags/#dop'>dop</a>
            
            <a href='/tags/#golang'>golang</a>
            
            <a href='/tags/#graph'>graph</a>
            
            <a href='/tags/#html'>html</a>
            
            <a href='/tags/#java'>java</a>
            
            <a href='/tags/#javascript'>javascript</a>
            
            <a href='/tags/#kids'>kids</a>
            
            <a href='/tags/#klipse'>klipse</a>
            
            <a href='/tags/#lambda-calculus'>lambda-calculus</a>
            
            <a href='/tags/#lambdacalculus'>lambdacalculus</a>
            
            <a href='/tags/#lisp'>lisp</a>
            
            <a href='/tags/#lua'>lua</a>
            
            <a href='/tags/#maths'>maths</a>
            
            <a href='/tags/#oblivion'>oblivion</a>
            
            <a href='/tags/#ocaml'>ocaml</a>
            
            <a href='/tags/#php'>php</a>
            
            <a href='/tags/#prolog'>prolog</a>
            
            <a href='/tags/#python'>python</a>
            
            <a href='/tags/#react'>react</a>
            
            <a href='/tags/#reagent'>reagent</a>
            
            <a href='/tags/#reasonml'>reasonml</a>
            
            <a href='/tags/#ruby'>ruby</a>
            
            <a href='/tags/#scheme'>scheme</a>
            
            <a href='/tags/#sql'>sql</a>
            
            <a href='/tags/#theory'>theory</a>
            
            <a href='/tags/#visualization'>visualization</a>
            
        </div><!-- .tag-links -->
    </section><!-- .tagcloud -->
</main><!-- .site-main -->


<link rel="stylesheet" type="text/css" href="https://storage.googleapis.com/app.klipse.tech/css/codemirror.css">
<link rel="stylesheet" type="text/css" href="https://storage.googleapis.com/app.klipse.tech/css/prolog.css">

<script>
    window.klipse_settings = {
        codemirror_options_in: {
            lineWrapping: true,
            autoCloseBrackets: true
        },
        codemirror_options_out: {
            lineWrapping: true
        },
        beautify_strings: true,

        selector: '.language-klipse, .language-eval-clj',
        selector_eval_js: '.language-klipse-eval-js, .language-eval-js, [data-lang=klipse-javascript]',
        selector_jsx: '.language-klipse-jsx',
        selector_prolog_rules: '.language-prolog-rules',
        selector_prolog_query: '.language-prolog-query',
        selector_render_jsx: '.language-render-jsx',
        selector_es2017: '.language-es2017',
        selector_brainfuck: '.language-brainfuck',
        selector_transpile_jsx: '.language-transpile-jsx',
        selector_eval_php: '.language-klipse-eval-php',
        selector_eval_markdown: '.language-klipse-markdown',
        selector_eval_lambdaway: '.language-klipse-lambdaway',
        selector_eval_python_client: '.language-klipse-python, .language-eval-python',
        selector_eval_html: '.language-klipse-html',
        selector_sql: '.language-klipse-sql',
        selector_eval_ruby: '.language-klipse-eval-ruby, .language-eval-ruby',
        selector_eval_scheme: '.language-klipse-scheme, .language-eval-scheme',
        selector_eval_clisp: '.language-klipse-clisp',    
        selector_eval_cpp: '.language-klipse-cpp',
        selector_google_charts: '.language-google-chart',
        selector_plot: '.language-plot',
        selector_oblivion: '.language-oblivion',
        selector_lua: '.language-klipse-lua',
        selector_js: '.language-klipse-js',
        selector_eval_ocaml: '.language-klipse-ocaml',
        selector_transpile_ocaml: '.language-transpile-ocaml',
        selector_transpile_reason_3: '.language-transpile-reason',
        selector_transpile_reason_3_to_ocaml: '.language-transpile-reason-to-ocaml',
        selector_eval_reason_3: '.language-klipse-reason',
        selector_eval_reason_3_with_types: '.language-klipse-reason-types',
        selector_eval_ocaml_with_types: '.language-klipse-ocaml-types',
        selector_ocaml_to_reason: '.language-ocaml-to-reason',
        selector_reagent: '.language-reagent',
        selector_golang: '.language-klipse-go',
    };










    

    


</script>



<script src="https://storage.googleapis.com/app.klipse.tech/plugin/js/klipse_plugin.js?v=8.0.1"></script>





                

                
                <footer id="colophon" class="site-footer">
    <p class="site-info inner">
        <a href="#">Yehonathan Sharvit</a> &copy; 2023.
    </p>
    <a id="back-to-top" class="back-to-top" href="#page">
        <span class="icon-arrow-up" aria-hidden="true"></span>
        <span class="screen-reader-text">Back to top</span>
    </a>
</footer><!-- .site-footer -->

            </div><!-- .inner-wide -->
        </div><!-- .site-content -->
    </div><!-- .site -->

    
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-75651930-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-75651930-1', { 'anonymize_ip': true });
  </script>

    <!-- Javascript Assets -->
    <script src="/assets/js/jquery-3.3.1.min.js"></script>
    <script src="/assets/js/plugins.js"></script>
    <script src="/assets/js/custom.js"></script>

</body>

</html>
